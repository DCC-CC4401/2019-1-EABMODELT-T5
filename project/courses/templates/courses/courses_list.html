{% extends "base.html" %}
{% block content %}
<!DOCTYPE html>
<html lang="es">
<title>Plataforma de evaluación-Cursos</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Poppins", sans-serif}
body {font-size:16px;}
.w3-half img{margin-bottom:-6px;margin-top:16px;opacity:0.8;cursor:pointer}
.w3-half img:hover{opacity:1}
</style>
<body>



<!-- Top menu on small screens -->
<header class="w3-container w3-top w3-hide-large w3-red w3-xlarge w3-padding">
  <a href="javascript:void(0)" class="w3-button w3-red w3-margin-right" onclick="w3_open()">☰</a>
  <span>Usuario</span>
</header>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:340px;margin-right:40px">

  <!-- Portada -->
  <div class="w3-container" id="portada" style="margin-top:80px; margin-bottom:10px">
    <h1 class="w3-xxxlarge w3-text-red"><b>Cursos</b></h1>
    <hr style="width:50px;border:5px solid red" class="w3-round">
    <p><h3>Seleccione un curso</p></h2>
  </div>

<!--Cajas cursos-->
{% for course in courses %}
  <div class="w3-row-padding w3-center w3-margin-top">
  <div class="w3-quarter w3-margin-top">
      <button onclick="goToDetails('{{course.code}}', '{{course.section}}', '{{course.year}}', '{{course.semester}}')">
      <!-- La función goToDetails está definida en el script de abajo -->

        <h3>{{course.title}}</h3><br>
    <i class="fas fa-book" style="font-size:100px"></i>
    <p>{{course.code}}</p>
    <p>{{course.section}}</p>
    <p>{{course.semester}}</p>
        <button class="w3-btn w3-red">Modificar</button>
        <button onclick="document.getElementById('delete_course_{{course.id}}').style.display='block'" class="w3-btn w3-red">Eliminar</button>
        <div class="w3-modal" id="delete_course_{{course.id}}">
          <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">          
            <div class="w3-center">
              <h4 class="modal-title">Eliminar Curso</h4>
              <span onclick="document.getElementById('delete_course_{{course.id}}').style.display='none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">×</span>
              <div class="w3-section">
                <div>¿Está seguro que quiere eliminar el curso {{course.title}}?</div>
                <form id="delete_course_form_{{course.id}}" method="post" action="/courses/delete/">
                  {% csrf_token %}
                  <div class="form-group">
                    <input type="hidden" name="id_course" value="{{course.id}}">
                  </div>
                  <button type="submit" class="w3-button w3-block w3-red w3-section w3-padding">Confirmar</button>
                </form>
              </div>
            </div>
          </div>
        </div>  
      </button>
    </div>
  </div>
  {% endfor %}

    <!--Caja de agregar-->
<div class="w3-quarter w3-margin-top">
  <button onclick="document.getElementById('agregar').style.display='block'" class="w3-card w3-container w3-light-gray w3-hover-shadow" style="min-height: 317px">
  <h3>Agregar curso nuevo</h3><br>
  <i class="fas fa-plus" style="font-size:100px;text-align: center; padding:50px"></i>
  </button>
</div>
    <div id="agregar" class="w3-modal">
    <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">
        <div class="w3-center"><br>
            <span onclick="document.getElementById('agregar').style.display='none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">×</span>

            <div class="w3-section">
              <form name="coursesForm" class="site-form" action="/courses/" method="post">
                {% csrf_token %}
                  <label for="title">Titulo</label>
                  <input type="text" name="title" placeholder="Titulo">
                  <br><br>
                  <label for="code">Código</label>
                  <input type="text" name="code" placeholder="Código">
                  <br><br>
                  <label for="semester">Semestre</label>
                  <select name="semester">
                    <option value="Primavera">Primavera</option>
                    <option value="Otoño">Otoño</option>
                  </select>
                  <br><br>
                  <label for="section">Sección</label>
                  <select name="section">
                    <option value="1">1</option>
                    <option value="2">2</option>
                  </select>
                  <br><br>
                  <label for="year">Año</label>
                  <input type="text" name="year" placeholder="2019">
                  <br><br>
                <input type="submit" value="Registrar" />
                  <br><br>

            </div>
    <!--cierre de cajas de cursos-->
</div>
<!--cierre de contenido-->
</div>
<script>
// Script to open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}
function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}
// Modal Image Gallery
function onClick(element) {
  document.getElementById("img01").src = element.src;
  document.getElementById("modal01").style.display = "block";
  var captionText = document.getElementById("caption");
  captionText.innerHTML = element.alt;
}

// Función para ver los detalles del curso
function goToDetails(code, section, year, semester) {
    let str= code + "-" + section + "-" + year + "-" + semester;
    location.href= str;
}
</script>

</body>
</html>

{% endblock %}
